"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=DBHelper.imageNameForRestaurant(e),n=document.getElementById("restaurant-pic-container"),r=document.createElement("picture"),a=document.createElement("source");a.setAttribute("media","(max-width:750px)"),a.setAttribute("srcset","/img/"+t+"-650.jpg 1x, /img/"+t+"-800.jpg 2x");var i=document.createElement("source");i.setAttribute("media","(max-width:1200px)"),i.setAttribute("srcset","/img/"+t+"-550.jpg 1x, /img/"+t+"-800.jpg 2x");var l=document.createElement("img");l.src="/img/"+t+"-800.jpg",l.className="restaurant-img",l.id="restaurant-img",l.alt=e.name,r.append(a),r.append(i),r.append(l),n.prepend(r),document.getElementById("map-container").setAttribute("aria-label","Google Maps showing "+e.name+"'s location"),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type+" Restaurant",e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("div");n.className="reviews-author",n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("small");r.className="reviews-date",r.innerHTML=e.date,n.appendChild(r);var a=document.createElement("p");a.innerHTML=e.comments,t.appendChild(a);var i=document.createElement("span");return i.className="reviews-rating",i.title="Rating: "+e.rating,i.setAttribute("aria-label",i.title),i.innerHTML="&#9733;".repeat(parseInt(e.rating)),t.appendChild(i),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsInNlbGYiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnNvbGUiLCJjZW50ZXIiLCJsYXRsbmciLCJzY3JvbGx3aGVlbCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJEQkhlbHBlciIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJuYW1lIiwiYWRkcmVzcyIsImltZ05hbWUiLCJpbWFnZU5hbWVGb3JSZXN0YXVyYW50IiwicGljdHVyZSIsImNyZWF0ZUVsZW1lbnQiLCJzb3VyY2Vfc21hbGwiLCJzZXRBdHRyaWJ1dGUiLCJwaWN0dXJlX2NvbnRhaW5lciIsInNvdXJjZV9sYXJnZSIsImltYWdlIiwiY2xhc3NOYW1lIiwic3JjIiwicHJlcGVuZCIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwiaG91cnMiLCJrZXkiLCJvcGVyYXRpbmdIb3VycyIsInJvdyIsImRheSIsInRpbWUiLCJyZXZpZXdzIiwiYXBwZW5kQ2hpbGQiLCJ0aXRsZSIsImNvbnRhaW5lciIsIm5vUmV2aWV3cyIsInJldmlldyIsInVsIiwiY3JlYXRlUmV2aWV3SFRNTCIsImZvckVhY2giLCJsaSIsImRhdGUiLCJjb21tZW50cyIsInJhdGluZyIsInJlcGVhdCIsInBhcnNlSW50IiwiYnJlYWRjcnVtYiIsImZpbGxCcmVhZGNydW1iIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVzdWx0cyIsImRlY29kZVVSSUNvbXBvbmVu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QUFBZCxZQUFBUSxJQU1GTyxtQkFBaUIsU0FBQXhDLEVBQUF5QyxHQUFDbEUsSUFZZGtFLEVBQU1qRSxPQUFPa0UsU0FBU0MsTUFYeEIzQyxFQUFNdUMsRUFBQUEsUUFBYXZELFVBQVNDLFFBQzVCLElBQ0FnRCxFQURXakQsSUFBU3FCLE9BQVRyQixPQUF1QmdCLEVBQXZCaEIscUJBQ0lULEtBQUFBLEdBQ2ZnRSxPQUFBQSxFQWNLSyxFQUFRLEdBRU5DLG1CQUFtQkQsRUFBUSxHQUFHRSxRQUFRLE1BQU8sTUFidEQsR0FQQSIsImZpbGUiOiJyZXN0YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudDtcclxudmFyIG1hcDtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICAgICAgem9vbTogMTYsXHJcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcclxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XHJcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXHJcbiAqL1xyXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XHJcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcclxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XHJcbiAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcclxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xyXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcclxuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcclxuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcblxyXG4gIGNvbnN0IGltZ05hbWUgPSBEQkhlbHBlci5pbWFnZU5hbWVGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG5cclxuICBjb25zdCBwaWN0dXJlX2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LXBpYy1jb250YWluZXInKTtcclxuICBjb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncGljdHVyZScpO1xyXG5cclxuICBjb25zdCBzb3VyY2Vfc21hbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcclxuICBzb3VyY2Vfc21hbGwuc2V0QXR0cmlidXRlKCdtZWRpYScsICcobWF4LXdpZHRoOjc1MHB4KScpO1xyXG4gIHNvdXJjZV9zbWFsbC5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIGAvaW1nLyR7aW1nTmFtZX0tNjUwLmpwZyAxeCwgL2ltZy8ke2ltZ05hbWV9LTgwMC5qcGcgMnhgKTtcclxuXHJcbiAgY29uc3Qgc291cmNlX2xhcmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgc291cmNlX2xhcmdlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCAnKG1heC13aWR0aDoxMjAwcHgpJyk7XHJcbiAgc291cmNlX2xhcmdlLnNldEF0dHJpYnV0ZSgnc3Jjc2V0JywgYC9pbWcvJHtpbWdOYW1lfS01NTAuanBnIDF4LCAvaW1nLyR7aW1nTmFtZX0tODAwLmpwZyAyeGApO1xyXG5cclxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIGltYWdlLnNyYyA9IGAvaW1nLyR7aW1nTmFtZX0tODAwLmpwZ2A7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuICBpbWFnZS5pZCA9ICdyZXN0YXVyYW50LWltZyc7XHJcbiAgaW1hZ2UuYWx0ID0gcmVzdGF1cmFudC5uYW1lO1xyXG5cclxuXHJcbiAgcGljdHVyZS5hcHBlbmQoc291cmNlX3NtYWxsKTtcclxuICBwaWN0dXJlLmFwcGVuZChzb3VyY2VfbGFyZ2UpO1xyXG4gIHBpY3R1cmUuYXBwZW5kKGltYWdlKTtcclxuICBwaWN0dXJlX2NvbnRhaW5lci5wcmVwZW5kKHBpY3R1cmUpO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBHb29nbGUgTWFwcyBzaG93aW5nICR7cmVzdGF1cmFudC5uYW1lfSdzIGxvY2F0aW9uYCk7XHJcblxyXG4gIC8qY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcclxuICBpbWFnZS5hbHQgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJ1xyXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICAqL1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xyXG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gYCR7cmVzdGF1cmFudC5jdWlzaW5lX3R5cGV9IFJlc3RhdXJhbnRgO1xyXG5cclxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xyXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xyXG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcclxuICB9XHJcbiAgLy8gZmlsbCByZXZpZXdzXHJcbiAgZmlsbFJldmlld3NIVE1MKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XHJcbiAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xyXG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xyXG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuXHJcbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcclxuICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xyXG5cclxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xyXG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xyXG5cclxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xyXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgaWYgKCFyZXZpZXdzKSB7XHJcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XHJcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XHJcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xyXG4gIH0pO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBuYW1lLmNsYXNzTmFtZSA9ICdyZXZpZXdzLWF1dGhvcidcclxuICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xyXG4gIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xyXG5cclxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc21hbGwnKTtcclxuICBkYXRlLmNsYXNzTmFtZSA9ICdyZXZpZXdzLWRhdGUnO1xyXG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XHJcbiAgbmFtZS5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xyXG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcclxuXHJcbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gIHJhdGluZy5jbGFzc05hbWUgPSAncmV2aWV3cy1yYXRpbmcnO1xyXG4gIHJhdGluZy50aXRsZSA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xyXG4gIHJhdGluZy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCByYXRpbmcudGl0bGUpO1xyXG4gIHJhdGluZy5pbm5lckhUTUwgPSAnJiM5NzMzOycucmVwZWF0KHBhcnNlSW50KHJldmlldy5yYXRpbmcpKTsgLy9zdGFyIChwYXN0aW5nIHRoZSBzeW1ib2wgYXMgc3RyaW5nIGl0c2VsZiBkaWRuJ3Qgd29yaylcclxuICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpO1xyXG5cclxuICByZXR1cm4gbGk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxyXG4gKi9cclxuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICBsaS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxyXG4gKi9cclxuZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xyXG4gIGlmICghdXJsKVxyXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xyXG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxyXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICBpZiAoIXJlc3VsdHMpXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICBpZiAoIXJlc3VsdHNbMl0pXHJcbiAgICByZXR1cm4gJyc7XHJcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcclxufVxyXG4iXX0=
