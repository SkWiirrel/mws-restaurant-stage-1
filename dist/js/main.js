"use strict";var restaurants=void 0,neighborhoods=void 0,cuisines=void 0,map=void 0,markers=[],dbHelper=new DBHelper,intersectionObservationCallback=function(e,r){e.filter(function(e){return e.isIntersecting}).forEach(function(e){var t=e.target.querySelectorAll("source[data-srcset]"),n=e.target.querySelector("img[data-src]");t.forEach(function(e){e.setAttribute("srcset",e.getAttribute("data-srcset")),e.removeAttribute("data-srcset")}),n.setAttribute("src",n.getAttribute("data-src")),n.removeAttribute("data-src"),r.unobserve(e.target)})},intersectionObserver=new IntersectionObserver(intersectionObservationCallback),fetchNeighborhoods=function(){dbHelper.fetchNeighborhoods(function(e,t){e?(self.neighborhoods=t,fillNeighborhoodsHTML()):console.error(t)})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},fetchCuisines=function(){dbHelper.fetchCuisines(function(e,t){e?(self.cuisines=t,fillCuisinesHTML()):console.error(t)})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})};window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()};var updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e[e.selectedIndex].value,r=t[t.selectedIndex].value;dbHelper.fetchRestaurantByCuisineAndNeighborhood(n,r,function(e,t){e?(resetRestaurants(t),fillRestaurantsHTML()):console.error(t)})},resetRestaurants=function(e){self.restaurants=[];var t=document.getElementById("restaurants-list");t.querySelectorAll("picture").forEach(function(e){return intersectionObserver.unobserve(e)}),t.innerHTML="",self.markers&&self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("li"),n=e.photograph||5,r=document.createElement("figure"),a=document.createElement("picture"),s=document.createElement("source");s.setAttribute("media","(max-width:750px)"),s.setAttribute("data-srcset","/img/"+n+"-650.webp 1x, /img/"+n+"-800.webp 2x");var o=document.createElement("source");o.setAttribute("media","(max-width:1200px)"),o.setAttribute("data-srcset","/img/"+n+"-550.webp 1x, /img/"+n+"-800.webp 2x");var i=document.createElement("img");i.setAttribute("data-src","/img/"+n+"-800.webp"),i.className="restaurant-img",i.alt=e.name,a.append(s),a.append(o),a.append(i),r.append(a),intersectionObserver.observe(a);var c=document.createElement("figcaption");c.innerHTML=e.cuisine_type+" Restaurant",r.append(c),t.append(r);var u=document.createElement("div");u.className="restaurant-info";var d=document.createElement("h3");d.innerHTML=e.name,u.append(d);var l=document.createElement("p");l.innerHTML=e.neighborhood,u.append(l);var m=document.createElement("p");m.innerHTML=e.address,u.append(m);var p=document.createElement("a");return p.innerHTML="View Details about "+e.name,p.href=dbHelper.urlForRestaurant(e),u.append(p),t.append(u),t},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=dbHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})};document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXAiLCJEQkhlbHBlciIsImludGVyc2VjdGlvbk9ic2VydmF0aW9uQ2FsbGJhY2siLCJlbnRyaWVzIiwib2JzZXJ2ZXIiLCJmaWx0ZXIiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwiZm9yRWFjaCIsInNvdXJjZXMiLCJ0YXJnZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW1nIiwicXVlcnlTZWxlY3RvciIsInNvdXJjZSIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImludGVyc2VjdGlvbk9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJkYkhlbHBlciIsIm9rIiwic2VsZiIsImNvbnNvbGUiLCJlcnJvciIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm5laWdoYm9yaG9vZCIsIm9wdGlvbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNlbGVjdCIsImZldGNoQ3Vpc2luZXMiLCJmaWxsQ3Vpc2luZXNIVE1MIiwiZ2V0RWxlbWVudEJ5SWQiLCJjdWlzaW5lIiwidmFsdWUiLCJ3aW5kb3ciLCJpbml0TWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImNlbnRlciIsImxhdCIsImxuZyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJzZWxlY3RlZEluZGV4IiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsInJlc2V0UmVzdGF1cmFudHMiLCJ1bCIsInBpY3R1cmUiLCJ1bm9ic2VydmUiLCJtYXJrZXJzIiwibSIsInNldE1hcCIsInBpY3R1cmVzIiwicmVzdGF1cmFudCIsImFwcGVuZCIsImNyZWF0ZVJlc3RhdXJhbnRIVE1MIiwibGkiLCJwaG90b2dyYXBoIiwiZmlndXJlIiwiYWRkTWFya2Vyc1RvTWFwIiwic291cmNlX3NtYWxsIiwiaW1nTmFtZSIsInNvdXJjZV9sYXJnZSIsImltYWdlIiwiY2FwdGlvbiIsImN1aXNpbmVfdHlwZSIsIm5hbWUiLCJpbm5lckhUTUwiLCJhZGRyZXNzIiwiaW5mbyIsIm1vcmUiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIm1hcmtlciIsImhyZWYiLCJ1cmwiLCJwdXNoIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFBQSxpQkFBQUEsRUFHRUMsbUJBQUFBLEVBREZDLGNBQUFBLEVBQ0VELFNBQUFBLEVBQ0FDLFFBQUFBLEdBQ0VDLFNBQUosSUFBQUMsU0FPTUMsZ0NBQWtDLFNBQUNDLEVBQVNDLEdBQWxERCxFQUdLRSxPQUFPLFNBQUFDLEdBQUEsT0FBU0EsRUFBTUMsaUJBRHpCSixRQUNHRSxTQUFBQSxHQUNBRyxJQUZIQyxFQUVXSCxFQUFBSSxPQUFTQyxpQkFBQSx1QkFHVkMsRUFBTU4sRUFBTUksT0FBT0csY0FBYyxpQkFBdkNKLEVBQVlILFFBQU1JLFNBQUFBLEdBR2hCSSxFQUFPQyxhQUFhLFNBQVVELEVBQU9FLGFBQWEsZ0JBRHBEUCxFQUFRRCxnQkFBUSxpQkFBaEJJLEVBQUFHLGFBQUEsTUFBQUgsRUFBQUksYUFBQSxhQU1BSixFQUFJSyxnQkFBZ0IsWUFBcEJMLEVBQUlLLFVBQWdCWCxFQUFBSSxXQWYxQlEscUJBQUEsSUFBQUMscUJBc0JFakIsaUNBTUlrQixtQkFBcUIsV0FDekJDLFNBQVNELG1CQUFtQixTQUFBRSxFQUFBeEIsR0FDckJ3QixHQUFMQyxLQUVPekIsY0FBQUEsRUFDTHlCLHlCQUhTQyxRQUFBQyxNQUFBM0IsTUFZVDRCLHNCQUF3QixXQUF3QyxJQUF2QzVCLEVBQXVDLEVBQUE2QixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBdkJKLEtBQUt6QixjQUE5QzRCLEVBQUFBLFNBQUFBLGVBQUFBLHdCQUFnRTVCLEVBQXZDQSxRQUF1QyxTQUFBZ0Ms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VXhDLFNBQVNDLGNBQWMsY0FadkN1QyxFQUFNRCxVQUFpQnRDLEVBQVR3QyxhQUFkLGNBQ0FGLEVBQU14RCxPQUFBQSxHQUVOd0QsRUFBQUEsT0FBQUwsR0FFQVgsSUFBQUEsRUFBUU8sU0FBT00sY0FBZixPQUNBYixFQUFBQSxVQUFlZSxrQkFFZkosSUFBQUEsRUFBQWxDLFNBQUFDLGNBQUEsTUFjQXlDLEVBQUtDLFVBQVlkLEVBQVdhLEtBWjVCeEQsRUFBQUEsT0FBQUEsR0FFQSxJQUFNc0QsRUFBVXhDLFNBQVNDLGNBQWMsS0FDdkN1QyxFQUFRRyxVQUFlZCxFQUFXWSxhQUNsQ1AsRUFBQUEsT0FBT0osR0FFUEUsSUFBR0YsRUFBSDlCLFNBQUFDLGNBQUEsS0FjQTJDLEVBQVFELFVBQVlkLEVBQVdlLFFBWi9CQyxFQUFNQSxPQUFPN0MsR0FlYixJQUFNOEMsRUFBTzlDLFNBQVNDLGNBQWMsS0FOcEM0QyxPQU5BQyxFQUFNSixVQUFOLHNCQUFBYixFQUFBYSxLQUNBQSxFQUFLQyxLQUFBQSxTQUFZZCxpQkFBakJBLEdBQ0FnQixFQUFLZixPQUFPWSxHQUVaVixFQUFBRixPQUFNaEMsR0FFRGdDLEdBTUNnQixnQkFBZ0I3QyxZQUF0QixFQUFBTixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBYUosS0FBYjFCLGFBQ0s4RSxRQUFMLFNBQUFkLEdBRUFnQixJQUFLZixFQUFMekMsU0FBQTBELHVCQUFBbEIsRUFBQXRDLEtBQUF2QixLQWNFMEMsT0FBT0MsS0FBS3FDLE1BQU1DLFlBQVlDLEVBQVEsUUFBUyxXQVo5Q3BCLE9BQU9lLFNBQVZNLEtBQUFELEVBQUFFLE1BRUE3RCxLQUFPeUMsUUFBUHFCLEtBQUFILE1BTTBEbEQsU0FBbkNuQyxpQkFBbUMsbUJBQUEsU0FBQW1GLEdBZTFENUQscUJBZEF2QiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG5sZXQgcmVzdGF1cmFudHMsXHJcbiAgbmVpZ2hib3Job29kcyxcclxuICBjdWlzaW5lcztcclxubGV0IG1hcDtcclxubGV0IG1hcmtlcnMgPSBbXTtcclxuY29uc3QgZGJIZWxwZXIgPSBuZXcgREJIZWxwZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBPbmx5IGxvYWQgaW1hZ2VzIHdoZW4gdGhleSBiZWNvbWUgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnRcclxuICovXHJcbmNvbnN0IGludGVyc2VjdGlvbk9ic2VydmF0aW9uQ2FsbGJhY2sgPSAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuXHJcbiAgZW50cmllc1xyXG4gICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5pc0ludGVyc2VjdGluZylcclxuICAgIC5mb3JFYWNoKGVudHJ5ID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IHNvdXJjZXMgPSBlbnRyeS50YXJnZXQucXVlcnlTZWxlY3RvckFsbCgnc291cmNlW2RhdGEtc3Jjc2V0XScpO1xyXG4gICAgICBjb25zdCBpbWcgPSBlbnRyeS50YXJnZXQucXVlcnlTZWxlY3RvcignaW1nW2RhdGEtc3JjXScpO1xyXG5cclxuICAgICAgc291cmNlcy5mb3JFYWNoKHNvdXJjZSA9PiB7XHJcbiAgICAgICAgc291cmNlLnNldEF0dHJpYnV0ZSgnc3Jjc2V0Jywgc291cmNlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmNzZXQnKSk7XHJcbiAgICAgICAgc291cmNlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zcmNzZXQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBpbWcuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpKTtcclxuICAgICAgaW1nLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcclxuXHJcbiAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBpbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICBpbnRlcnNlY3Rpb25PYnNlcnZhdGlvbkNhbGxiYWNrXHJcbik7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuY29uc3QgZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIGRiSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygob2ssIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmICghb2spIHsgLy8gR290IGFuIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IobmVpZ2hib3Job29kcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxuY29uc3QgZmlsbE5laWdoYm9yaG9vZHNIVE1MID0gKG5laWdoYm9yaG9vZHMgPSBzZWxmLm5laWdoYm9yaG9vZHMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZDtcclxuICAgIG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuY29uc3QgZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuICBkYkhlbHBlci5mZXRjaEN1aXNpbmVzKChvaywgY3Vpc2luZXMpID0+IHtcclxuICAgIGlmICghb2spIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGN1aXNpbmVzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxyXG4gKi9cclxuY29uc3QgZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcblxyXG4gIGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZTtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBsZXQgbG9jID0ge1xyXG4gICAgbGF0OiA0MC43MjIyMTYsXHJcbiAgICBsbmc6IC03My45ODc1MDFcclxuICB9O1xyXG4gIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgIHpvb206IDEyLFxyXG4gICAgY2VudGVyOiBsb2MsXHJcbiAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICB9KTtcclxuICB1cGRhdGVSZXN0YXVyYW50cygpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXHJcbiAqL1xyXG5jb25zdCB1cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY1NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25TZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcblxyXG4gIGRiSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChvaywgcmVzdGF1cmFudHMpID0+IHtcclxuICAgIGlmICghb2spIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKHJlc3RhdXJhbnRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xyXG4gICAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxuY29uc3QgcmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG5cclxuICBjb25zdCBwaWN0dXJlcyA9IHVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BpY3R1cmUnKTtcclxuICBwaWN0dXJlcy5mb3JFYWNoKHBpY3R1cmUgPT4gaW50ZXJzZWN0aW9uT2JzZXJ2ZXIudW5vYnNlcnZlKHBpY3R1cmUpKTtcclxuICB1bC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIGlmIChzZWxmLm1hcmtlcnMpIHtcclxuICAgIHNlbGYubWFya2Vycy5mb3JFYWNoKG0gPT4gbS5zZXRNYXAobnVsbCkpO1xyXG4gIH1cclxuICBzZWxmLm1hcmtlcnMgPSBbXTtcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gcmVzdGF1cmFudHM7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNvbnN0IGZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jb25zdCBjcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcblxyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgY29uc3QgaW1nTmFtZSA9IHJlc3RhdXJhbnQucGhvdG9ncmFwaCB8fCA1O1xyXG5cclxuICBjb25zdCBmaWd1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKTtcclxuICBjb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncGljdHVyZScpO1xyXG5cclxuICBjb25zdCBzb3VyY2Vfc21hbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcclxuICBzb3VyY2Vfc21hbGwuc2V0QXR0cmlidXRlKCdtZWRpYScsICcobWF4LXdpZHRoOjc1MHB4KScpO1xyXG4gIHNvdXJjZV9zbWFsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3Jjc2V0JywgYC9pbWcvJHtpbWdOYW1lfS02NTAud2VicCAxeCwgL2ltZy8ke2ltZ05hbWV9LTgwMC53ZWJwIDJ4YCk7XHJcblxyXG4gIGNvbnN0IHNvdXJjZV9sYXJnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xyXG4gIHNvdXJjZV9sYXJnZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgJyhtYXgtd2lkdGg6MTIwMHB4KScpO1xyXG4gIHNvdXJjZV9sYXJnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3Jjc2V0JywgYC9pbWcvJHtpbWdOYW1lfS01NTAud2VicCAxeCwgL2ltZy8ke2ltZ05hbWV9LTgwMC53ZWJwIDJ4YCk7XHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXNyYycsIGAvaW1nLyR7aW1nTmFtZX0tODAwLndlYnBgKTtcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xyXG4gIGltYWdlLmFsdCA9IHJlc3RhdXJhbnQubmFtZTtcclxuXHJcbiAgcGljdHVyZS5hcHBlbmQoc291cmNlX3NtYWxsKTtcclxuICBwaWN0dXJlLmFwcGVuZChzb3VyY2VfbGFyZ2UpO1xyXG4gIHBpY3R1cmUuYXBwZW5kKGltYWdlKTtcclxuICBmaWd1cmUuYXBwZW5kKHBpY3R1cmUpO1xyXG5cclxuICBpbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHBpY3R1cmUpO1xyXG5cclxuICBjb25zdCBjYXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlnY2FwdGlvbicpO1xyXG4gIGNhcHRpb24uaW5uZXJIVE1MID0gYCR7cmVzdGF1cmFudC5jdWlzaW5lX3R5cGV9IFJlc3RhdXJhbnRgO1xyXG4gIGZpZ3VyZS5hcHBlbmQoY2FwdGlvbik7XHJcblxyXG4gIGxpLmFwcGVuZChmaWd1cmUpO1xyXG5cclxuICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgaW5mby5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbmZvJztcclxuXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgaW5mby5hcHBlbmQobmFtZSk7XHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgaW5mby5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBpbmZvLmFwcGVuZChhZGRyZXNzKTtcclxuXHJcbiAgY29uc3QgbW9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICBtb3JlLmlubmVySFRNTCA9IGBWaWV3IERldGFpbHMgYWJvdXQgJHtyZXN0YXVyYW50Lm5hbWV9YDtcclxuICBtb3JlLmhyZWYgPSBkYkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGluZm8uYXBwZW5kKG1vcmUpO1xyXG5cclxuICBsaS5hcHBlbmQoaW5mbyk7XHJcblxyXG4gIHJldHVybiBsaTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxuY29uc3QgYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICAvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcclxuICAgIGNvbnN0IG1hcmtlciA9IGRiSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybDtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKTtcclxuICBmZXRjaEN1aXNpbmVzKCk7XHJcbn0pO1xyXG4iXX0=
